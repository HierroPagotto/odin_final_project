<h1 class="mb-4 text-primary">Post</h1>
<div class="card mb-4 shadow border-primary">
  <div class="card-body">
    <p class="mb-1"><span class="badge bg-primary">Autor</span> <strong><%= @post.user.name || @post.user.email %></strong></p>
    <p class="mb-1"><span class="badge bg-secondary">Conteúdo</span> <%= @post.content %></p>
    <p class="mb-3"><span class="badge bg-info text-dark">Data</span> <%= @post.created_at.strftime('%d/%m/%Y %H:%M') %></p>
    <div class="mb-3">
      <span class="badge bg-success">Curtidas: <%= @post.likes.count %></span>
      <% if @post.likes.exists?(user: current_user) %>
        <%= button_to 'Descurtir', post_like_path(@post, @post.likes.find_by(user: current_user)), method: :delete, class: 'btn btn-outline-danger btn-sm ms-2' %>
      <% else %>
        <%= button_to 'Curtir', post_likes_path(@post), method: :post, class: 'btn btn-outline-success btn-sm ms-2' %>
      <% end %>
    </div>
  </div>
</div>
<h2 class="mb-3 text-secondary">Comentários</h2>
<ul class="list-group mb-3">
  <% @post.comments.each do |comment| %>
    <li class="list-group-item">
      <span class="badge bg-light text-dark me-2"><%= comment.user.name || comment.user.email %></span> <%= comment.content %>
    </li>
  <% end %>
</ul>
<%= form_with(model: [@post, Comment.new], local: true) do |form| %>
  <div class="mb-3">
    <%= form.label :content, 'Novo comentário', class: 'form-label' %>
    <%= form.text_area :content, rows: 2, class: 'form-control' %>
  </div>
  <div>
    <%= form.submit 'Comentar', class: 'btn btn-primary' %>
  </div>
<% end %>
<%= link_to 'Voltar', posts_path, class: 'btn btn-outline-secondary mt-3' %>
